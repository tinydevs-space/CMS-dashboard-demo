import{g as W,e as G,r as v,f as K,z as R,s as T,k as _,j as e,l as b,m as V,n as B,o as F,p as X,a6 as q,a7 as Y,a as H,u as J,af as Q,T as E,ag as Z,B as U,I as tt,M as et}from"./index-DMJqV7G2.js";import{C as at}from"./config-global-BwHnWRtc.js";import"./products-view-YWi8r4aJ.js";import{u as st,P as p,a as D}from"./use-products-DnnZ1ZSZ.js";import{S as rt,D as ot}from"./Checkbox-BIyVs7H0.js";import{S as I,G as z}from"./Grid-OOcLsr6I.js";import{C as A}from"./Card-D6C8e8k8.js";import{T as C,F as it,I as nt}from"./TextField-BakN2I1v.js";import{S as ct}from"./Select-Dqtl26_i.js";import{F as M}from"./format-number-DnHxfpjo.js";function lt(t){return G("MuiSwitch",t)}const n=W("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),dt=t=>{const{classes:a,edge:o,size:h,color:x,checked:g,disabled:w}=t,m={root:["root",o&&`edge${b(o)}`,`size${b(h)}`],switchBase:["switchBase",`color${b(x)}`,g&&"checked",w&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},f=V(m,lt,a);return{...a,...f}},ut=T("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.edge&&a[`edge${b(o.edge)}`],a[`size${b(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${n.thumb}`]:{width:16,height:16},[`& .${n.switchBase}`]:{padding:4,[`&.${n.checked}`]:{transform:"translateX(16px)"}}}}]}),pt=T(rt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.switchBase,{[`& .${n.input}`]:a.input},o.color!=="default"&&a[`color${b(o.color)}`]]}})(B(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${n.checked}`]:{transform:"translateX(20px)"},[`&.${n.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${n.checked} + .${n.track}`]:{opacity:.5},[`&.${n.disabled} + .${n.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${n.input}`]:{left:"-100%",width:"300%"}})),B(({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:F(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(X(["light"])).map(([a])=>({props:{color:a},style:{[`&.${n.checked}`]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:F(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${n.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${a}DisabledColor`]:`${t.palette.mode==="light"?q(t.palette[a].main,.62):Y(t.palette[a].main,.55)}`}},[`&.${n.checked} + .${n.track}`]:{backgroundColor:(t.vars||t).palette[a].main}}}))]}))),ht=T("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,a)=>a.track})(B(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),gt=T("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,a)=>a.thumb})(B(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),O=v.forwardRef(function(a,o){const h=K({props:a,name:"MuiSwitch"}),{className:x,color:g="primary",edge:w=!1,size:m="medium",sx:f,slots:d={},slotProps:r={},...S}=h,i={...h,color:g,edge:w,size:m},u=dt(i),k={slots:d,slotProps:r},[j,P]=R("root",{className:_(u.root,x),elementType:ut,externalForwardedProps:k,ownerState:i,additionalProps:{sx:f}}),[s,l]=R("thumb",{className:u.thumb,elementType:gt,externalForwardedProps:k,ownerState:i}),c=e.jsx(s,{...l}),[y,$]=R("track",{className:u.track,elementType:ht,externalForwardedProps:k,ownerState:i});return e.jsxs(j,{...P,children:[e.jsx(pt,{type:"checkbox",icon:c,checkedIcon:c,ref:o,ownerState:i,...S,classes:{...u,root:u.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...r.switchBase&&{root:typeof r.switchBase=="function"?r.switchBase(i):r.switchBase},...r.input&&{input:typeof r.input=="function"?r.input(i):r.input}}}),e.jsx(y,{...$})]})});let L=!1;const mt=()=>{L||(console.warn(["MUI: The LoadingButton component functionality is now part of the Button component from Material UI.","","You should use `import Button from '@mui/material/Button'`","or `import { Button } from '@mui/material'`"].join(`
`)),L=!0)},ft=v.forwardRef(function(a,o){return mt(),e.jsx(H,{ref:o,...a})});function vt(){var j,P;const t=J(),{id:a}=Q(),o=!!a,{addProduct:h,updateProduct:x,getProductById:g}=st(),[w,m]=v.useState(!1),[f,d]=v.useState(null),[r,S]=v.useState({name:"",description:"",price:0,salePrice:void 0,stock:0,category:D.GUITARS,status:[p.IN_STOCK],images:[],coverImage:"",specifications:{}});v.useEffect(()=>{if(o&&a){const s=g(a);s?S(s):d("Product not found")}},[o,a,g]);const i=(s,l)=>{S(c=>({...c,[s]:l}))},u=s=>{var c;const l=(c=s.target.files)==null?void 0:c[0];if(l){const y=new FileReader;y.onloadend=()=>{const $=y.result;S(N=>({...N,coverImage:$,images:[$,...N.images||[]]}))},y.readAsDataURL(l)}},k=async()=>{try{if(m(!0),d(null),!r.name||!r.price)throw new Error("Name and Price are required");o&&a?x(a,r):h(r),t("/admin/products")}catch(s){d(s instanceof Error?s.message:"Something went wrong")}finally{m(!1)}};return e.jsxs(ot,{children:[e.jsx(I,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:5},children:e.jsx(E,{variant:"h4",children:o?"Edit Product":"New Product"})}),f&&e.jsx(Z,{severity:"error",sx:{mb:3},children:f}),e.jsxs(z,{container:!0,spacing:3,children:[e.jsx(z,{size:{xs:12,md:8},children:e.jsx(A,{sx:{p:3},children:e.jsxs(I,{spacing:3,children:[e.jsx(C,{label:"Product Name",fullWidth:!0,value:r.name,onChange:s=>i("name",s.target.value)}),e.jsx(C,{label:"Description",fullWidth:!0,multiline:!0,rows:4,value:r.description,onChange:s=>i("description",s.target.value)}),e.jsx(E,{variant:"h6",sx:{mb:.5},children:"Images"}),e.jsxs(U,{sx:{p:3,border:"1px dashed",borderColor:"grey.500",borderRadius:1,textAlign:"center",cursor:"pointer","&:hover":{bgcolor:"action.hover"}},component:"label",children:[e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:u}),e.jsxs(I,{spacing:1,alignItems:"center",children:[e.jsx(tt,{icon:"eva:cloud-upload-fill",width:40,sx:{color:"primary.main"}}),e.jsx(E,{variant:"body2",children:"Upload Image"})]})]}),r.coverImage&&e.jsx(U,{component:"img",src:r.coverImage,sx:{width:"100%",height:300,objectFit:"cover",borderRadius:1}})]})})}),e.jsx(z,{size:{xs:12,md:4},children:e.jsx(A,{sx:{p:3},children:e.jsxs(I,{spacing:3,children:[e.jsxs(it,{fullWidth:!0,children:[e.jsx(nt,{children:"Category"}),e.jsx(ct,{value:r.category,label:"Category",onChange:s=>i("category",s.target.value),children:Object.values(D).map(s=>e.jsx(et,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsx(C,{label:"Price",type:"number",fullWidth:!0,InputProps:{startAdornment:"$"},value:r.price,onChange:s=>i("price",Number(s.target.value))}),e.jsx(C,{label:"Sale Price",type:"number",fullWidth:!0,InputProps:{startAdornment:"$"},value:r.salePrice||"",onChange:s=>i("salePrice",s.target.value?Number(s.target.value):void 0)}),e.jsx(C,{label:"Stock",type:"number",fullWidth:!0,value:r.stock,onChange:s=>i("stock",Number(s.target.value))}),e.jsx(M,{control:e.jsx(O,{checked:(j=r.status)==null?void 0:j.includes(p.IN_STOCK),onChange:s=>{const l=s.target.checked?[...r.status||[],p.IN_STOCK]:(r.status||[]).filter(c=>c!==p.IN_STOCK);i("status",l)}}),label:"In Stock"}),e.jsx(M,{control:e.jsx(O,{checked:(P=r.status)==null?void 0:P.includes(p.FEATURED),onChange:s=>{const l=s.target.checked?[...r.status||[],p.FEATURED]:(r.status||[]).filter(c=>c!==p.FEATURED);i("status",l)}}),label:"Featured Product"}),e.jsx(ft,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:w,onClick:k,children:o?"Update Product":"Create Product"})]})})})]})]})}function It(){return e.jsxs(e.Fragment,{children:[e.jsxs("title",{children:[" ",`Product Editor - ${at.appName}`]}),e.jsx(vt,{})]})}export{It as default};
